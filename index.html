<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prodigy 2.6 - Hacking Simulator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Courier New', monospace;
            overflow: hidden;
            width: 100vw;
            height: 100vh;
            user-select: none;
            -webkit-user-select: none;
        }
        
        #game-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        #menu {
            text-align: center;
            color: white;
        }
        
        #menu h1 {
            font-size: 3em;
            text-shadow: 4px 4px 0 rgba(0,0,0,0.5);
            margin-bottom: 10px;
            animation: pulse 2s infinite;
        }
        
        #menu h2 {
            font-size: 1.8em;
            color: #ffd700;
            margin-bottom: 30px;
            text-shadow: 2px 2px 0 rgba(0,0,0,0.5);
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .game-card {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 15px;
            padding: 20px 40px;
            margin: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-block;
            min-width: 300px;
            user-select: none;
            -webkit-user-select: none;
        }
        
        .game-card:hover {
            background: rgba(255,255,255,0.25);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .game-card h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }
        
        .game-card p {
            font-size: 0.9em;
            color: #ddd;
        }
        
        #game-screen {
            display: none;
            flex-direction: column;
            align-items: center;
            width: 100%;
            height: 100%;
            position: relative;
        }
        
        #game-canvas {
            border: 3px solid #ffd700;
            background: #000;
            margin: 10px;
            display: block;
        }
        
        #game-ui {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: flex-end;
        }
        
        .ui-element {
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px 15px;
            border-radius: 10px;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        #game-info {
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.3em;
            margin: 10px;
            display: flex;
            gap: 30px;
            align-items: center;
        }
        
        #back-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255,0,0,0.8);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            z-index: 1000;
        }
        
        #back-btn:hover {
            background: rgba(255,0,0,1);
        }

        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            font-size: 2em;
            z-index: 999;
            display: none;
        }

        .game-over button {
            margin-top: 20px;
            padding: 15px 30px;
            font-size: 0.8em;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }
        
        #discord-status {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.7);
            color: #00ff00;
            padding: 10px 15px;
            border-radius: 5px;
            font-size: 0.9em;
            display: none;
        }
        
        #settings-menu {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.95);
            color: white;
            padding: 30px;
            border-radius: 15px;
            width: 500px;
            z-index: 1001;
            display: none;
        }
        
        .settings-section {
            margin-bottom: 25px;
        }
        
        .settings-section h3 {
            margin-bottom: 15px;
            color: #ffd700;
        }
        
        .control-setting {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding: 8px 0;
        }
        
        .control-setting label {
            font-size: 1.1em;
        }
        
        .control-setting select {
            background: #333;
            color: white;
            border: 1px solid #555;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 1em;
        }
        
        #close-settings {
            background: #f44336;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            margin-top: 20px;
            width: 100%;
        }
        
        .dragging {
            opacity: 0.7;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <!-- Discord Status Indicator -->
        <div id="discord-status">Discord Activity</div>
        
        <!-- Main Menu -->
        <div id="menu">
            <h1>üéÆ PRODIGY 2.6 üéÆ</h1>
            <h2>HACKING SIMULATOR</h2>
            <div style="margin-top: 40px;">
                <div class="game-card" data-game="breakout">
                    <h3>üß± GAME 1: BREAKOUT</h3>
                    <p>Break all blocks ‚Ä¢ 3 Lives ‚Ä¢ Classic arcade action</p>
                </div>
                <div class="game-card" data-game="asteroids">
                    <h3>üöÄ GAME 2: SPACE SHOOTER</h3>
                    <p>Destroy asteroids ‚Ä¢ Avoid bombs ‚Ä¢ 5 Lives</p>
                </div>
                <div class="game-card" data-game="hanoi">
                    <h3>üç© GAME 3: TOWER OF HANOI</h3>
                    <p>Move 5 rings ‚Ä¢ 60 seconds ‚Ä¢ Classic puzzle</p>
                </div>
                <div class="game-card" data-game="wordle">
                    <h3>üî§ GAME 4: WORDLE</h3>
                    <p>Guess the word ‚Ä¢ Unlimited tries ‚Ä¢ Daily challenge</p>
                </div>
                <div class="game-card" id="menu-settings-btn">
                    <h3>‚öôÔ∏è SETTINGS</h3>
                    <p>Customize controls and game options</p>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen">
            <button id="back-btn">‚Üê BACK TO MENU</button>
            <canvas id="game-canvas" width="800" height="600"></canvas>
            <div id="game-ui"></div>
            <div id="game-info"></div>
        </div>

        <!-- Settings Menu -->
        <div id="settings-menu">
            <h2 style="text-align: center; margin-bottom: 20px; color: #ffd700;">SETTINGS</h2>
            
            <div class="settings-section">
                <h3>CONTROLS</h3>
                
                <div class="control-setting">
                    <label for="breakout-left">Breakout - Move Left:</label>
                    <select id="breakout-left">
                        <option value="ArrowLeft">Arrow Left</option>
                        <option value="KeyA">A Key</option>
                    </select>
                </div>
                
                <div class="control-setting">
                    <label for="breakout-right">Breakout - Move Right:</label>
                    <select id="breakout-right">
                        <option value="ArrowRight">Arrow Right</option>
                        <option value="KeyD">D Key</option>
                    </select>
                </div>
                
                <div class="control-setting">
                    <label for="asteroids-up">Space Shooter - Move Up:</label>
                    <select id="asteroids-up">
                        <option value="ArrowUp">Arrow Up</option>
                        <option value="KeyW">W Key</option>
                    </select>
                </div>
                
                <div class="control-setting">
                    <label for="asteroids-down">Space Shooter - Move Down:</label>
                    <select id="asteroids-down">
                        <option value="ArrowDown">Arrow Down</option>
                        <option value="KeyS">S Key</option>
                    </select>
                </div>
                
                <div class="control-setting">
                    <label for="asteroids-shoot">Space Shooter - Shoot:</label>
                    <select id="asteroids-shoot">
                        <option value="Space">Spacebar</option>
                        <option value="KeyF">F Key</option>
                    </select>
                </div>
            </div>
            
            <button id="close-settings">CLOSE SETTINGS</button>
        </div>

        <div class="game-over" id="game-over-screen">
            <div id="game-over-text"></div>
            <button id="play-again-btn">PLAY AGAIN</button>
            <button id="menu-btn" style="background: #f44336; margin-left: 10px;">MENU</button>
        </div>
    </div>

    <script>
        // DOM Elements
        const canvas = document.getElementById('game-canvas');
        const ctx = canvas.getContext('2d');
        const menu = document.getElementById('menu');
        const gameScreen = document.getElementById('game-screen');
        const gameInfo = document.getElementById('game-info');
        const gameUI = document.getElementById('game-ui');
        const gameOverScreen = document.getElementById('game-over-screen');
        const discordStatus = document.getElementById('discord-status');
        const settingsMenu = document.getElementById('settings-menu');
        
        // Game State
        let currentGame = null;
        let gameState = {};
        let gameLoopId = null;
        
        // Settings
        let settings = {
            breakout: {
                left: 'ArrowLeft',
                right: 'ArrowRight'
            },
            asteroids: {
                up: 'ArrowUp',
                down: 'ArrowDown',
                shoot: 'Space'
            }
        };

        // Word List
        const WORDS = [
            'SWIFT', 'REACT', 'CODER', 'SNAKE', 'APPLE', 'BRAIN', 'CLOUD', 'DRONE', 
            'EAGLE', 'FLAME', 'GHOST', 'HUMAN', 'IVORY', 'JUMBO', 'KOALA', 'LEMON',
            'MAGIC', 'NINJA', 'OCEAN', 'PIANO', 'QUEEN', 'ROBOT', 'SPACE', 'TIGER',
            'ULTRA', 'VOICE', 'WATER', 'XENON', 'YACHT', 'ZEBRA', 'ALPHA', 'BETA',
            'GAMMA', 'DELTA', 'OMEGA', 'SIGMA', 'THETA', 'KAPPA', 'LASER', 'MUSIC',
            'NIGHT', 'PARTY', 'QUICK', 'RIVER', 'STORM', 'TRAIN', 'UNITY', 'VIDEO',
            'WORLD', 'YOUTH', 'ZESTY', 'ANGEL', 'BEACH', 'CANDY', 'DREAM', 'EARTH',
            'FRUIT', 'GRAPE', 'HEART', 'IMAGE', 'JUICE', 'KNIFE', 'LIGHT', 'MOUSE'
        ];

        // Check if running in Discord
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('frame_id') || urlParams.get('instance_id')) {
            discordStatus.style.display = 'block';
            console.log('Running in Discord Activity!');
        }

        // ============= GAME 1: BREAKOUT =============
        function initBreakout() {
            gameState = {
                paddle: { x: 350, y: 550, width: 100, height: 15, speed: 8 },
                ball: { x: 400, y: 535, vx: 0, vy: 0, radius: 8, launched: false },
                bricks: [],
                lives: 3,
                score: 0,
                keys: { left: false, right: false, launch: false }
            };

            // Create bricks (8 rows x 10 columns)
            for (let row = 0; row < 8; row++) {
                for (let col = 0; col < 10; col++) {
                    gameState.bricks.push({
                        x: col * 80 + 5,
                        y: row * 30 + 50,
                        width: 75,
                        height: 25,
                        alive: true
                    });
                }
            }
            
            updateUI();
        }

        function updateBreakout() {
            const { paddle, ball, bricks } = gameState;

            // Paddle movement
            if (gameState.keys.left && paddle.x > 0) paddle.x -= paddle.speed;
            if (gameState.keys.right && paddle.x < 800 - paddle.width) paddle.x += paddle.speed;

            // Launch ball with space
            if (!ball.launched && gameState.keys.launch) {
                ball.vx = 4;
                ball.vy = -4;
                ball.launched = true;
                gameState.keys.launch = false;
            }

            // Keep ball on paddle before launch
            if (!ball.launched) {
                ball.x = paddle.x + paddle.width / 2;
                ball.y = paddle.y - ball.radius;
            } else {
                // Ball movement
                ball.x += ball.vx;
                ball.y += ball.vy;

                // Wall collision
                if (ball.x - ball.radius < 0 || ball.x + ball.radius > 800) ball.vx *= -1;
                if (ball.y - ball.radius < 0) ball.vy *= -1;

                // Paddle collision
                if (ball.y + ball.radius > paddle.y && 
                    ball.x > paddle.x && ball.x < paddle.x + paddle.width &&
                    ball.vy > 0) {
                    ball.vy *= -1;
                    const hitPos = (ball.x - paddle.x) / paddle.width;
                    ball.vx = (hitPos - 0.5) * 10;
                }

                // Brick collision
                for (let brick of bricks) {
                    if (!brick.alive) continue;
                    if (ball.x + ball.radius > brick.x && ball.x - ball.radius < brick.x + brick.width &&
                        ball.y + ball.radius > brick.y && ball.y - ball.radius < brick.y + brick.height) {
                        brick.alive = false;
                        ball.vy *= -1;
                        gameState.score += 10;
                    }
                }

                // Ball falls
                if (ball.y > 600) {
                    gameState.lives--;
                    if (gameState.lives <= 0) {
                        endGame('GAME OVER!', `Score: ${gameState.score}`);
                    } else {
                        // Reset ball on paddle
                        ball.x = paddle.x + paddle.width / 2;
                        ball.y = paddle.y - ball.radius;
                        ball.vx = 0;
                        ball.vy = 0;
                        ball.launched = false;
                    }
                }
            }

            // Win condition
            if (bricks.every(b => !b.alive)) {
                endGame('YOU WIN!', `Perfect Score: ${gameState.score}`);
            }

            updateUI();
        }

        function drawBreakout() {
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, 800, 600);

            const { paddle, ball, bricks } = gameState;

            // Draw bricks
            for (let brick of bricks) {
                if (brick.alive) {
                    ctx.fillStyle = '#fff';
                    ctx.fillRect(brick.x, brick.y, brick.width, brick.height);
                    ctx.strokeStyle = '#333';
                    ctx.strokeRect(brick.x, brick.y, brick.width, brick.height);
                }
            }

            // Draw paddle
            ctx.fillStyle = '#00ff00';
            ctx.fillRect(paddle.x, paddle.y, paddle.width, paddle.height);

            // Draw ball
            ctx.fillStyle = '#ff0000';
            ctx.beginPath();
            ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
            ctx.fill();

            // Draw launch instruction
            if (!gameState.ball.launched) {
                ctx.fillStyle = '#ffff00';
                ctx.font = '20px Arial';
                ctx.fillText('Press SPACE to launch ball', 300, 300);
            }
        }

        // ============= GAME 2: SPACE SHOOTER =============
        function initAsteroids() {
            gameState = {
                ship: { y: 300, speed: 6 },
                asteroids: [],
                bullets: [],
                ammo: 20,
                lives: 5,
                asteroidsDestroyed: 0,
                asteroidsToDestroy: 100,
                spawnTimer: 0,
                keys: { up: false, down: false, shoot: false }
            };
            
            updateUI();
        }

        function updateAsteroids() {
            const { ship, asteroids, bullets } = gameState;

            // Ship movement
            if (gameState.keys.up && ship.y > 20) ship.y -= ship.speed;
            if (gameState.keys.down && ship.y < 580) ship.y += ship.speed;

            // Shooting
            if (gameState.keys.shoot && gameState.ammo > 0) {
                bullets.push({ x: 80, y: ship.y });
                gameState.ammo--;
                gameState.keys.shoot = false; // Prevent holding
            }

            // Spawn asteroids
            gameState.spawnTimer++;
            if (gameState.spawnTimer > 60) {
                gameState.spawnTimer = 0;
                const isBomb = Math.random() < 0.15;
                asteroids.push({
                    x: 800,
                    y: Math.random() * 560 + 20,
                    speed: Math.random() * 3 + 2,
                    isBomb: isBomb,
                    size: 20
                });
            }

            // Update bullets
            for (let i = bullets.length - 1; i >= 0; i--) {
                bullets[i].x += 10;
                if (bullets[i].x > 800) bullets.splice(i, 1);
            }

            // Update asteroids
            for (let i = asteroids.length - 1; i >= 0; i--) {
                asteroids[i].x -= asteroids[i].speed;
                
                // Check bullet collision
                for (let j = bullets.length - 1; j >= 0; j--) {
                    const dx = asteroids[i].x - bullets[j].x;
                    const dy = asteroids[i].y - bullets[j].y;
                    if (Math.sqrt(dx*dx + dy*dy) < 20) {
                        if (asteroids[i].isBomb) {
                            // Only lose lives if bomb explodes near ship (not when shot)
                            const bombDist = Math.abs(ship.y - asteroids[i].y);
                            if (bombDist < 100) {
                                gameState.lives -= 2;
                            }
                            // Always remove bomb when shot
                            asteroids.splice(i, 1);
                            bullets.splice(j, 1);
                            break;
                        } else {
                            // Asteroid destroyed
                            gameState.ammo += 2;
                            gameState.asteroidsDestroyed++;
                            asteroids.splice(i, 1);
                            bullets.splice(j, 1);
                            break;
                        }
                    }
                }

                // Check if bomb reaches left side without being shot
                if (asteroids[i] && asteroids[i].isBomb && asteroids[i].x < 100) {
                    const bombDist = Math.abs(ship.y - asteroids[i].y);
                    if (bombDist < 100) {
                        gameState.lives -= 2;
                    }
                    asteroids.splice(i, 1);
                    continue;
                }

                // Asteroid passed
                if (asteroids[i] && asteroids[i].x < -30) {
                    if (!asteroids[i].isBomb) {
                        gameState.lives--;
                    }
                    asteroids.splice(i, 1);
                }
            }

            // Check win/lose conditions
            if (gameState.lives <= 0) {
                endGame('GAME OVER!', `Asteroids Destroyed: ${gameState.asteroidsDestroyed}/100`);
            }
            
            if (gameState.asteroidsDestroyed >= gameState.asteroidsToDestroy) {
                endGame('YOU WIN!', `Destroyed all ${gameState.asteroidsToDestroy} asteroids!`);
            }

            updateUI();
        }

        function drawAsteroids() {
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, 800, 600);

            const { ship, asteroids, bullets } = gameState;

            // Draw ship
            ctx.fillStyle = '#00ff00';
            ctx.beginPath();
            ctx.moveTo(50, ship.y);
            ctx.lineTo(80, ship.y - 15);
            ctx.lineTo(80, ship.y + 15);
            ctx.closePath();
            ctx.fill();

            // Draw bullets
            ctx.fillStyle = '#ffff00';
            for (let bullet of bullets) {
                ctx.fillRect(bullet.x, bullet.y - 2, 10, 4);
            }

            // Draw asteroids
            for (let ast of asteroids) {
                if (ast.isBomb) {
                    ctx.fillStyle = '#ffff00';
                    ctx.font = '30px Arial';
                    ctx.fillText('üí£', ast.x - 15, ast.y + 10);
                } else {
                    ctx.fillStyle = '#888';
                    ctx.beginPath();
                    ctx.arc(ast.x, ast.y, ast.size, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
        }

        // ============= GAME 3: TOWER OF HANOI =============
        function initHanoi() {
            gameState = {
                towers: [
                    [5, 4, 3, 2, 1], // Tower 1
                    [],              // Tower 2
                    []               // Tower 3
                ],
                dragging: null,
                moves: 0,
                timeLeft: 60,
                startTime: Date.now()
            };
            
            updateUI();
        }

        function updateHanoi() {
            gameState.timeLeft = 60 - Math.floor((Date.now() - gameState.startTime) / 1000);
            
            if (gameState.timeLeft <= 0) {
                endGame('TIME UP!', `Moves: ${gameState.moves}`);
                return;
            }

            // Win condition
            if (gameState.towers[2].length === 5) {
                endGame('YOU WIN!', `Moves: ${gameState.moves} | Time: ${60 - gameState.timeLeft}s`);
            }

            updateUI();
        }

        function drawHanoi() {
            ctx.fillStyle = '#1a1a2e';
            ctx.fillRect(0, 0, 800, 600);

            const colors = ['#e74c3c', '#3498db', '#2ecc71', '#f39c12', '#9b59b6'];
            
            // Draw towers
            for (let t = 0; t < 3; t++) {
                const x = 150 + t * 250;
                
                // Tower base
                ctx.fillStyle = '#555';
                ctx.fillRect(x - 80, 500, 160, 10);
                ctx.fillRect(x - 5, 300, 10, 200);

                // Tower number
                ctx.fillStyle = '#fff';
                ctx.font = '24px Arial';
                ctx.fillText(`Tower ${t + 1}`, x - 40, 280);

                // Draw rings
                const tower = gameState.towers[t];
                for (let i = 0; i < tower.length; i++) {
                    const ringSize = tower[i];
                    const width = ringSize * 25 + 20;
                    const y = 490 - i * 30;
                    
                    ctx.fillStyle = colors[ringSize - 1];
                    ctx.fillRect(x - width/2, y, width, 25);
                    ctx.strokeStyle = '#000';
                    ctx.strokeRect(x - width/2, y, width, 25);
                    
                    // Draw ring number
                    ctx.fillStyle = '#fff';
                    ctx.font = 'bold 16px Arial';
                    ctx.fillText(ringSize, x - 5, y + 17);
                }
            }
            
            // Draw dragging ring
            if (gameState.dragging) {
                const ringSize = gameState.dragging.ring;
                const width = ringSize * 25 + 20;
                const x = gameState.dragging.x;
                const y = gameState.dragging.y;
                
                ctx.fillStyle = colors[ringSize - 1];
                ctx.fillRect(x - width/2, y, width, 25);
                ctx.strokeStyle = '#ffff00';
                ctx.lineWidth = 3;
                ctx.strokeRect(x - width/2, y, width, 25);
                
                // Draw ring number
                ctx.fillStyle = '#fff';
                ctx.font = 'bold 16px Arial';
                ctx.fillText(ringSize, x - 5, y + 17);
            }

            // Instructions
            ctx.fillStyle = '#fff';
            ctx.font = '18px Arial';
            ctx.fillText('Drag and drop rings between towers', 200, 550);
        }

        function getTowerAt(x, y) {
            if (y < 300 || y > 500) return -1;
            
            if (x > 70 && x < 230) return 0;
            else if (x > 320 && x < 480) return 1;
            else if (x > 570 && x < 730) return 2;
            
            return -1;
        }

        function startDragHanoi(x, y) {
            const towerIndex = getTowerAt(x, y);
            if (towerIndex === -1 || gameState.towers[towerIndex].length === 0) return;
            
            // Get the top ring from the tower
            const ring = gameState.towers[towerIndex][gameState.towers[towerIndex].length - 1];
            
            gameState.dragging = {
                ring: ring,
                fromTower: towerIndex,
                x: x,
                y: y
            };
            
            // Remove from tower immediately when dragging starts
            gameState.towers[towerIndex].pop();
        }

        function dropHanoi(x, y) {
            if (!gameState.dragging) return;
            
            const toTower = getTowerAt(x, y);
            const ring = gameState.dragging.ring;
            
            if (toTower !== -1) {
                const topRing = gameState.towers[toTower].length > 0 
                    ? gameState.towers[toTower][gameState.towers[toTower].length - 1] 
                    : null;
                
                // Valid move?
                if (!topRing || ring < topRing) {
                    gameState.towers[toTower].push(ring);
                    gameState.moves++;
                } else {
                    // Invalid move, return to original tower
                    gameState.towers[gameState.dragging.fromTower].push(ring);
                }
            } else {
                // Dropped outside valid area, return to original tower
                gameState.towers[gameState.dragging.fromTower].push(ring);
            }
            
            gameState.dragging = null;
        }

        // ============= GAME 4: WORDLE =============
        function initWordle() {
            gameState = {
                targetWord: WORDS[Math.floor(Math.random() * WORDS.length)],
                guesses: Array(6).fill().map(() => ({ letters: Array(5).fill(''), result: Array(5).fill('') })),
                currentGuess: '',
                currentRow: 0,
                gameOver: false
            };
            console.log('Target word:', gameState.targetWord);
            updateUI();
        }

        function updateWordle() {
            updateUI();
        }

        function drawWordle() {
            ctx.fillStyle = '#121213';
            ctx.fillRect(0, 0, 800, 600);

            ctx.fillStyle = '#fff';
            ctx.font = 'bold 40px Arial';
            ctx.fillText('WORDLE', 320, 80);

            // Draw all 6 rows
            for (let i = 0; i < 6; i++) {
                const guess = gameState.guesses[i];
                for (let j = 0; j < 5; j++) {
                    const x = 200 + j * 80;
                    const y = 120 + i * 80;
                    
                    // Determine color
                    let color = '#3a3a3c'; // Gray (not in word)
                    if (guess.result[j] === 'correct') color = '#538d4e'; // Green
                    else if (guess.result[j] === 'present') color = '#b59f3b'; // Yellow

                    ctx.fillStyle = color;
                    ctx.fillRect(x, y, 70, 70);
                    
                    // Draw letter if exists
                    if (guess.letters[j]) {
                        ctx.fillStyle = '#fff';
                        ctx.font = 'bold 40px Arial';
                        ctx.fillText(guess.letters[j], x + 20, y + 50);
                    }
                }
            }

            // Draw current guess on current row
            if (!gameState.gameOver) {
                const row = gameState.currentRow;
                for (let j = 0; j < 5; j++) {
                    const x = 200 + j * 80;
                    const y = 120 + row * 80;
                    
                    ctx.strokeStyle = '#3a3a3c';
                    ctx.lineWidth = 2;
                    ctx.strokeRect(x, y, 70, 70);
                    
                    if (j < gameState.currentGuess.length) {
                        ctx.fillStyle = '#fff';
                        ctx.font = 'bold 40px Arial';
                        ctx.fillText(gameState.currentGuess[j], x + 20, y + 50);
                    }
                }
            }

            // Instructions
            ctx.fillStyle = '#818384';
            ctx.font = '16px Arial';
            ctx.fillText('Type your guess and press ENTER', 250, 560);
        }

        function handleWordleKey(key) {
            if (gameState.gameOver) return;

            if (key === 'BACKSPACE') {
                gameState.currentGuess = gameState.currentGuess.slice(0, -1);
            } else if (key === 'ENTER') {
                if (gameState.currentGuess.length === 5) {
                    checkWordleGuess();
                }
            } else if (key.length === 1 && /[A-Z]/.test(key) && gameState.currentGuess.length < 5) {
                gameState.currentGuess += key;
            }
        }

        function checkWordleGuess() {
            const guess = gameState.currentGuess;
            const target = gameState.targetWord;
            
            // Create result array
            const result = Array(5).fill('absent');
            const targetLetters = target.split('');
            const guessLetters = guess.split('');
            
            // First pass: mark correct letters
            for (let i = 0; i < 5; i++) {
                if (guessLetters[i] === targetLetters[i]) {
                    result[i] = 'correct';
                    targetLetters[i] = null; // Mark as used
                }
            }
            
            // Second pass: mark present letters
            for (let i = 0; i < 5; i++) {
                if (result[i] !== 'correct' && targetLetters.includes(guessLetters[i])) {
                    result[i] = 'present';
                    targetLetters[targetLetters.indexOf(guessLetters[i])] = null; // Mark as used
                }
            }
            
            // Update current row
            gameState.guesses[gameState.currentRow] = {
                letters: guess.split(''),
                result: result
            };
            
            gameState.currentGuess = '';
            gameState.currentRow++;
            
            if (guess === target) {
                gameState.gameOver = true;
                endGame('YOU WIN!', `Guesses: ${gameState.currentRow}`);
            } else if (gameState.currentRow >= 6) {
                gameState.gameOver = true;
                endGame('GAME OVER!', `The word was: ${gameState.targetWord}`);
            }
        }

        // ============= UI MANAGEMENT =============
        function updateUI() {
            gameUI.innerHTML = '';
            
            if (currentGame === 'breakout') {
                // Lives as hearts
                const livesElement = document.createElement('div');
                livesElement.className = 'ui-element';
                livesElement.innerHTML = '‚ù§Ô∏è'.repeat(gameState.lives);
                gameUI.appendChild(livesElement);
                
                gameInfo.innerHTML = `Score: ${gameState.score}`;
            } else if (currentGame === 'asteroids') {
                // Lives as hearts
                const livesElement = document.createElement('div');
                livesElement.className = 'ui-element';
                livesElement.innerHTML = '‚ù§Ô∏è'.repeat(gameState.lives);
                gameUI.appendChild(livesElement);
                
                // Ammo as icon + number
                const ammoElement = document.createElement('div');
                ammoElement.className = 'ui-element';
                ammoElement.innerHTML = `üî´ ${gameState.ammo}`;
                gameUI.appendChild(ammoElement);
                
                // Asteroids destroyed
                const asteroidsElement = document.createElement('div');
                asteroidsElement.className = 'ui-element';
                asteroidsElement.innerHTML = `üí• ${gameState.asteroidsDestroyed}/${gameState.asteroidsToDestroy}`;
                gameUI.appendChild(asteroidsElement);
                
                gameInfo.innerHTML = '';
            } else if (currentGame === 'hanoi') {
                gameInfo.innerHTML = `Time: ‚è±Ô∏è${gameState.timeLeft}s | Moves: ${gameState.moves}`;
            } else if (currentGame === 'wordle') {
                gameInfo.innerHTML = `Guesses: ${gameState.currentRow}/6`;
            }
        }

        // ============= GAME MANAGEMENT =============
        function startGame(game) {
            currentGame = game;
            menu.style.display = 'none';
            gameScreen.style.display = 'flex';

            // Force canvas redraw for Discord
            canvas.width = canvas.width;
            canvas.height = canvas.height;

            if (game === 'breakout') {
                initBreakout();
            } else if (game === 'asteroids') {
                initAsteroids();
            } else if (game === 'hanoi') {
                initHanoi();
            } else if (game === 'wordle') {
                initWordle();
            }

            // Restart game loop
            if (gameLoopId) {
                cancelAnimationFrame(gameLoopId);
            }
            gameLoop();
        }

        function backToMenu() {
            currentGame = null;
            gameScreen.style.display = 'none';
            gameOverScreen.style.display = 'none';
            menu.style.display = 'block';
            
            // Stop game loop
            if (gameLoopId) {
                cancelAnimationFrame(gameLoopId);
                gameLoopId = null;
            }
        }

        function restartGame() {
            gameOverScreen.style.display = 'none';
            startGame(currentGame);
        }

        function endGame(title, subtitle) {
            gameOverScreen.style.display = 'block';
            document.getElementById('game-over-text').innerHTML = `
                <h1>${title}</h1>
                <p style="font-size: 0.7em; margin-top: 10px;">${subtitle}</p>
            `;
            
            // Stop game loop
            if (gameLoopId) {
                cancelAnimationFrame(gameLoopId);
                gameLoopId = null;
            }
        }

        function gameLoop() {
            if (!currentGame) return;

            if (currentGame === 'breakout') {
                updateBreakout();
                drawBreakout();
            } else if (currentGame === 'asteroids') {
                updateAsteroids();
                drawAsteroids();
            } else if (currentGame === 'hanoi') {
                updateHanoi();
                drawHanoi();
            } else if (currentGame === 'wordle') {
                updateWordle();
                drawWordle();
            }

            gameLoopId = requestAnimationFrame(gameLoop);
        }

        // ============= SETTINGS MANAGEMENT =============
        function loadSettings() {
            const saved = localStorage.getItem('prodigySettings');
            if (saved) {
                settings = JSON.parse(saved);
            }
            
            // Update UI to match settings
            document.getElementById('breakout-left').value = settings.breakout.left;
            document.getElementById('breakout-right').value = settings.breakout.right;
            document.getElementById('asteroids-up').value = settings.asteroids.up;
            document.getElementById('asteroids-down').value = settings.asteroids.down;
            document.getElementById('asteroids-shoot').value = settings.asteroids.shoot;
        }
        
        function saveSettings() {
            settings.breakout.left = document.getElementById('breakout-left').value;
            settings.breakout.right = document.getElementById('breakout-right').value;
            settings.asteroids.up = document.getElementById('asteroids-up').value;
            settings.asteroids.down = document.getElementById('asteroids-down').value;
            settings.asteroids.shoot = document.getElementById('asteroids-shoot').value;
            
            localStorage.setItem('prodigySettings', JSON.stringify(settings));
        }

        // ============= EVENT LISTENERS =============
        document.addEventListener('DOMContentLoaded', function() {
            // Load settings
            loadSettings();
            
            // Game card click handlers
            document.querySelectorAll('.game-card').forEach(card => {
                card.addEventListener('click', function() {
                    const gameType = this.getAttribute('data-game');
                    if (gameType) {
                        startGame(gameType);
                    }
                });
            });
            
            // Button handlers
            document.getElementById('back-btn').addEventListener('click', backToMenu);
            document.getElementById('play-again-btn').addEventListener('click', restartGame);
            document.getElementById('menu-btn').addEventListener('click', backToMenu);
            document.getElementById('menu-settings-btn').addEventListener('click', function() {
                settingsMenu.style.display = 'block';
            });
            document.getElementById('close-settings').addEventListener('click', function() {
                saveSettings();
                settingsMenu.style.display = 'none';
            });
            
            // Hanoi drag and drop
            let isDragging = false;
            
            canvas.addEventListener('mousedown', (e) => {
                if (currentGame === 'hanoi' && !gameState.dragging) {
                    const rect = canvas.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    startDragHanoi(x, y);
                    isDragging = true;
                }
            });
            
            canvas.addEventListener('mousemove', (e) => {
                if (currentGame === 'hanoi' && gameState.dragging && isDragging) {
                    const rect = canvas.getBoundingClientRect();
                    gameState.dragging.x = e.clientX - rect.left;
                    gameState.dragging.y = e.clientY - rect.top;
                }
            });
            
            canvas.addEventListener('mouseup', (e) => {
                if (currentGame === 'hanoi' && gameState.dragging && isDragging) {
                    const rect = canvas.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    dropHanoi(x, y);
                    isDragging = false;
                }
            });
            
            // Keyboard controls with settings
            window.addEventListener('keydown', (e) => {
                if (currentGame === 'breakout') {
                    if (e.code === settings.breakout.left) gameState.keys.left = true;
                    if (e.code === settings.breakout.right) gameState.keys.right = true;
                    if (e.code === 'Space') {
                        gameState.keys.launch = true;
                        e.preventDefault();
                    }
                } else if (currentGame === 'asteroids') {
                    if (e.code === settings.asteroids.up) gameState.keys.up = true;
                    if (e.code === settings.asteroids.down) gameState.keys.down = true;
                    if (e.code === settings.asteroids.shoot) {
                        gameState.keys.shoot = true;
                        e.preventDefault(); // Prevent scrolling
                    }
                } else if (currentGame === 'wordle') {
                    handleWordleKey(e.key.toUpperCase());
                }
            });

            window.addEventListener('keyup', (e) => {
                if (currentGame === 'breakout') {
                    if (e.code === settings.breakout.left) gameState.keys.left = false;
                    if (e.code === settings.breakout.right) gameState.keys.right = false;
                    if (e.code === 'Space') gameState.keys.launch = false;
                } else if (currentGame === 'asteroids') {
                    if (e.code === settings.asteroids.up) gameState.keys.up = false;
                    if (e.code === settings.asteroids.down) gameState.keys.down = false;
                }
            });
        });
    </script>
</body>
</html>
